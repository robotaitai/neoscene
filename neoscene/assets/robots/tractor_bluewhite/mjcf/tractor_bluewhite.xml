<mujoco>
  <!-- Dynamic tractor with freejoint for full 6-DOF movement -->
  <compiler angle="degree"/>
  
  <default>
    <joint damping="0.5"/>
    <geom friction="1 0.5 0.5" condim="3"/>
  </default>
  
  <asset>
    <material name="tractor_body" rgba="0.2 0.4 0.7 1"/>
    <material name="tractor_white" rgba="0.9 0.9 0.95 1"/>
    <material name="tractor_wheel" rgba="0.15 0.15 0.15 1"/>
    <material name="tractor_metal" rgba="0.4 0.4 0.45 1"/>
  </asset>
  
  <worldbody>
    <body name="tractor_base">
      <!-- FREE JOINT: allows full 6-DOF movement -->
      <freejoint name="tractor_root"/>
      
      <!-- Main chassis with inertia -->
      <inertial pos="0 0 0.5" mass="1200" diaginertia="300 500 200"/>
      <geom name="chassis" type="box" size="1.5 0.8 0.4" pos="0 0 0.8" material="tractor_body"/>
      <geom name="hood" type="box" size="0.8 0.6 0.3" pos="1.5 0 0.6" material="tractor_body"/>
      
      <!-- Cab -->
      <geom name="cab_base" type="box" size="0.6 0.7 0.5" pos="-0.3 0 1.4" material="tractor_white"/>
      <geom name="cab_roof" type="box" size="0.65 0.75 0.05" pos="-0.3 0 1.95" material="tractor_metal"/>
      
      <!-- Engine block -->
      <geom name="engine" type="box" size="0.6 0.5 0.35" pos="1.5 0 1.0" material="tractor_metal"/>
      
      <!-- Sensor mount -->
      <site name="imu_site" pos="0 0 2.0" size="0.05"/>
      <camera name="driver_cam" pos="0.5 0 1.8" euler="0 -5 0" fovy="70"/>
      <camera name="rear_cam" pos="-1.5 0 1.5" euler="0 -10 180" fovy="90"/>
      
      <!-- FRONT WHEELS -->
      <body name="wheel_fl_body" pos="1.3 0.9 0.4">
        <inertial pos="0 0 0" mass="30" diaginertia="1 1 1"/>
        <joint name="wheel_fl" type="hinge" axis="0 1 0"/>
        <geom name="wheel_fl" type="cylinder" size="0.4 0.15" euler="90 0 0" material="tractor_wheel"/>
      </body>
      
      <body name="wheel_fr_body" pos="1.3 -0.9 0.4">
        <inertial pos="0 0 0" mass="30" diaginertia="1 1 1"/>
        <joint name="wheel_fr" type="hinge" axis="0 1 0"/>
        <geom name="wheel_fr" type="cylinder" size="0.4 0.15" euler="90 0 0" material="tractor_wheel"/>
      </body>
      
      <!-- REAR WHEELS (drive wheels) -->
      <body name="wheel_rl_body" pos="-1.0 0.85 0.6">
        <inertial pos="0 0 0" mass="50" diaginertia="2 2 2"/>
        <joint name="wheel_rl" type="hinge" axis="0 1 0"/>
        <geom name="wheel_rl" type="cylinder" size="0.6 0.2" euler="90 0 0" material="tractor_wheel"/>
      </body>
      
      <body name="wheel_rr_body" pos="-1.0 -0.85 0.6">
        <inertial pos="0 0 0" mass="50" diaginertia="2 2 2"/>
        <joint name="wheel_rr" type="hinge" axis="0 1 0"/>
        <geom name="wheel_rr" type="cylinder" size="0.6 0.2" euler="90 0 0" material="tractor_wheel"/>
      </body>
    </body>
  </worldbody>
  
  <!-- ACTUATORS -->
  <actuator>
    <velocity name="motor_rl" joint="wheel_rl" kv="200"/>
    <velocity name="motor_rr" joint="wheel_rr" kv="200"/>
  </actuator>
  
  <!-- SENSORS -->
  <sensor>
    <accelerometer name="imu_accel" site="imu_site"/>
    <gyro name="imu_gyro" site="imu_site"/>
    <velocimeter name="velocity" site="imu_site"/>
    <jointvel name="encoder_rl" joint="wheel_rl"/>
    <jointvel name="encoder_rr" joint="wheel_rr"/>
  </sensor>
</mujoco>
